<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>롯데호텔</title>
  <link rel="stylesheet" href="/reset.css" />
  <link rel="stylesheet" href="./index.css" />
</head>

<body>
  <header>
    <h1><img src="./img/logo.svg" alt=""></h1>
  </header>
  <!------------------------------------------------->
  <section>
    <article>
      <div class="summary">
        <h3 data-bg="./img/i.jpg">
          <em>Superyacht</em>
          Amalfi Coast, Italy
        </h3>
        <div class="article-desc">
          <h4 class="fs38">이탈리아&nbsp;아말피&nbsp; 해안</h4>
          <p class="stxt">
            아말피 해안은 나폴리 만에서 소렌티노 반도까지 이어진
            해안선입니다.
          </p>
          <button><a href="./Italy.html">MORE</a></button>
        </div>
      </div>
    </article>
    <article>
      <div class="summary">
        <h3 data-bg="./img/f.jpg">
          <em>Superyacht</em>
          The French Riviera
        </h3>
        <div class="article-desc">
          <h4 class="fs38">프랑스&nbsp; 리비에라</h4>
          <p class="stxt">
            최고의 지중해 요트 여행지로 유명한 프랑스 리비에라는 전 세계
            요트 마니아들로부터 가장 큰 사랑을 받고 있습니다.
          </p>
          <button><a href="./French.html">MORE</a></button>
        </div>
      </div>
    </article>
    <article>
      <div class="summary">
        <h3 data-bg="./img/g.jpg">
          <em>Superyacht</em>
          Greece
        </h3>
        <div class="article-desc">
          <h4 class="fs38">그리스</h4>
          <p class="stxt">
            신화와 전설의 땅으로 알려진 그리스는
          </p>

          <button><a href="./Greece.html">MORE</a></button>
        </div>
      </div>
    </article>
    <article>
      <div class="summary">
        <h3 data-bg="./img/c.jpg">
          <em>Superyacht</em>
          The Caribbean Sea
        </h3>
        <div class="article-desc">
          <h4 class="fs38">카리브해</h4>
          <p class="stxt">
            이국적인 카리브해에서 진정한 여유를 경험하세요.
          </p>

          <button><a href="./Caribbean.html">MORE</a></button>
        </div>
      </div>
    </article>
  </section>
  <!------------------------------------------------->
  <div class="frame">
    <div class="scene">

    </div>
  </div>
  <!------------------------------------------------->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    const section = document.querySelector('section')
    const articles = document.querySelectorAll('article')

    const frame = document.querySelector('.frame')//하단 영역
    const scene = document.querySelector('.scene')//불러들일 파일을 공간

    articles.forEach((article) => {
      const h4 = article.querySelector('h4')
      splitText(h4)
      // mouseenter 안에 넣어두면 매번 새로고침되서 애니메이션 안됨
      article.addEventListener('mouseenter', function () {
        this.classList.add('on')
        let bg = article.querySelector('h3').dataset.bg
        section.style.backgroundImage = `url(${bg})`
       
        moveUp(h4)
      })

      article.addEventListener('mouseleave', function () {
        this.classList.remove('on')
        const h4 = article.querySelector('h4')
        resetText(h4)
      })
    })

    document.querySelectorAll('button a').forEach((link) => {
      link.addEventListener('click', function (e) {
        e.preventDefault()
        const href = this.getAttribute('href')
        frame.style.top = 0

        // fetch api 자료 불러오기
        fetch(href)
          .then(res => res.text())
          .then(data => { scene.innerHTML = data })
        document.body.style.overflowY = 'auto'

      })
    })

    window.addEventListener('scroll', function () {
      if (window.scrollY === 0) {
        frame.style.top = '100%'
        document.body.style.overflowY = 'hidden'
      }
    })

    // h4 글자 나누기
    function splitText(el) {
      const txt = el.innerText
      let tags = ''
      txt.split('').forEach((letter) => {
        tags += `<span>${letter}</span>`
      })
      el.innerHTML = tags
    }

    function moveUp(el) {

      const spans = el.querySelectorAll('span')
      spans.forEach((span, i) => {
        span.style.transitionDelay = `${i * 0.05}s`
        span.style.transform = "translateY(0)"
        span.style.opacity = '1'
      })
    }

    function resetText(el) {
      const spans = el.querySelectorAll('span')
      spans.forEach((span) => {
        span.style.transform = "translateY(100%)"
        span.style.opacity = '0'
      })
    }
  </script>
</body>

</html>